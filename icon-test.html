<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Icon Test - Cheppu AI</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #0f0f1e;
            color: white;
        }
        .test-section {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
        }
        .icon-display {
            display: flex;
            gap: 30px;
            align-items: center;
            margin: 20px 0;
        }
        .icon-box {
            text-align: center;
        }
        img {
            background: white;
            padding: 10px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.5);
        }
        .status { padding: 10px; margin: 10px 0; border-radius: 5px; }
        .pass { background: #10b981; }
        .fail { background: #ef4444; }
        code {
            background: rgba(0,0,0,0.3);
            padding: 2px 6px;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <h1>ğŸ” Cheppu AI Icon Test</h1>
    <p>This page verifies that your icons are accessible and correct.</p>

    <div class="test-section">
        <h2>ğŸ“¸ Icon Files</h2>
        <div class="icon-display">
            <div class="icon-box">
                <img id="icon-192" src="/icon-192.png" width="192" height="192" alt="192x192 icon">
                <p><strong>icon-192.png</strong></p>
                <p id="status-192" class="status">Loading...</p>
            </div>
            <div class="icon-box">
                <img id="icon-512" src="/icon-512.png" width="256" height="256" alt="512x512 icon">
                <p><strong>icon-512.png</strong></p>
                <p id="status-512" class="status">Loading...</p>
            </div>
        </div>
    </div>

    <div class="test-section">
        <h2>ğŸ“‹ Manifest Check</h2>
        <p>Manifest URL: <code id="manifest-url"></code></p>
        <div id="manifest-status" class="status">Checking...</div>
        <details>
            <summary>View Manifest Content</summary>
            <pre id="manifest-content" style="overflow-x: auto; background: rgba(0,0,0,0.3); padding: 15px; border-radius: 5px;"></pre>
        </details>
    </div>

    <div class="test-section">
        <h2>âœ… Checklist</h2>
        <ul>
            <li id="check-192">ğŸ”„ 192x192 icon loads</li>
            <li id="check-512">ğŸ”„ 512x512 icon loads</li>
            <li id="check-manifest">ğŸ”„ Manifest is valid</li>
            <li id="check-icons-manifest">ğŸ”„ Icons listed in manifest</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>ğŸ”— Direct Links (Test These)</h2>
        <ul>
            <li><a href="/icon-192.png" target="_blank">/icon-192.png</a></li>
            <li><a href="/icon-512.png" target="_blank">/icon-512.png</a></li>
            <li><a href="/manifest.json" target="_blank">/manifest.json</a></li>
        </ul>
    </div>

    <script>
        const baseUrl = window.location.origin;
        document.getElementById('manifest-url').textContent = `${baseUrl}/manifest.json`;

        // Check icon 192
        const img192 = document.getElementById('icon-192');
        img192.onload = () => {
            document.getElementById('status-192').textContent = 'âœ… Loaded Successfully';
            document.getElementById('status-192').className = 'status pass';
            document.getElementById('check-192').innerHTML = 'âœ… 192x192 icon loads';
        };
        img192.onerror = () => {
            document.getElementById('status-192').textContent = 'âŒ Failed to Load';
            document.getElementById('status-192').className = 'status fail';
            document.getElementById('check-192').innerHTML = 'âŒ 192x192 icon MISSING';
        };

        // Check icon 512
        const img512 = document.getElementById('icon-512');
        img512.onload = () => {
            document.getElementById('status-512').textContent = 'âœ… Loaded Successfully';
            document.getElementById('status-512').className = 'status pass';
            document.getElementById('check-512').innerHTML = 'âœ… 512x512 icon loads';
        };
        img512.onerror = () => {
            document.getElementById('status-512').textContent = 'âŒ Failed to Load';
            document.getElementById('status-512').className = 'status fail';
            document.getElementById('check-512').innerHTML = 'âŒ 512x512 icon MISSING';
        };

        // Check manifest
        fetch('/manifest.json')
            .then(res => res.json())
            .then(manifest => {
                document.getElementById('manifest-status').textContent = 'âœ… Manifest Valid';
                document.getElementById('manifest-status').className = 'status pass';
                document.getElementById('manifest-content').textContent = JSON.stringify(manifest, null, 2);
                document.getElementById('check-manifest').innerHTML = 'âœ… Manifest is valid';

                // Check if icons are in manifest
                const has192 = manifest.icons.some(i => i.src.includes('192') && i.src.includes('.png'));
                const has512 = manifest.icons.some(i => i.src.includes('512') && i.src.includes('.png'));
                
                if (has192 && has512) {
                    document.getElementById('check-icons-manifest').innerHTML = 'âœ… Icons listed in manifest (PNG format)';
                } else {
                    document.getElementById('check-icons-manifest').innerHTML = 'âŒ PNG icons NOT in manifest';
                }
            })
            .catch(err => {
                document.getElementById('manifest-status').textContent = 'âŒ Manifest Error: ' + err.message;
                document.getElementById('manifest-status').className = 'status fail';
                document.getElementById('check-manifest').innerHTML = 'âŒ Manifest failed to load';
            });
    </script>
</body>
</html>
